<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vehicle Depreciation Calculator</title>
<link rel="icon" href="favicon.png">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --blue: #0A3D91;
  --yellow: #FFD200;
  --bg: #f3f6fb;
}

body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: var(--bg);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

/* LAYOUT */
.container {
  display: flex;
  gap: 40px;
}

/* CARD */
.card {
  width: 560px;
  background: white;
  border-radius: 24px;
  box-shadow: 0 30px 70px rgba(0,0,0,0.08);
  overflow: hidden;
}

/* HEADER */
.header {
  background: var(--blue);
  padding: 22px 35px;
  position: relative;
  display: flex;
  align-items: center;
}

.header img {
  height: 48px;
}

.header h1 {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  color: white;
  font-size: 18px;
  font-weight: 600;
  margin: 0;
}

.content {
  padding: 30px 40px 40px 40px;
}

.section-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--blue);
  margin: 15px 0 12px 0;
}

.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 20px;
}

.select-wrapper {
  display: flex;
  flex-direction: column;
}

.select-wrapper label {
  font-size: 12px;
  font-weight: 600;
  margin-bottom: 6px;
  color: #64748b;
}

.select-wrapper input,
.select-wrapper select {
  padding: 14px;
  border-radius: 14px;
  border: 1px solid #dce3f0;
  font-size: 14px;
}

button {
  width: 100%;
  padding: 16px;
  border-radius: 14px;
  border: none;
  background: var(--yellow);
  color: var(--blue);
  font-weight: 700;
  font-size: 15px;
  cursor: pointer;
}

.result {
  margin-top: 20px;
  padding: 20px;
  border-radius: 18px;
  background: #f3f6fb;
  text-align: center;
  font-weight: 600;
  color: var(--blue);
}

/* CHART CARD */
.chart-container {
  padding: 40px;
  height: 100%;
}

canvas {
  max-width: 100%;
}
</style>
</head>

<body>

<div class="container">

  <!-- CALCULATOR -->
  <div class="card">
    <div class="header">
      <img src="logo.jpeg">
      <h1>Vehicle Depreciation Calculator</h1>
    </div>

    <div class="content">

      <div class="section-title">Rate Settings</div>

      <div class="grid-2">
        <div class="select-wrapper">
          <label>Monthly Rate 1 (%)</label>
          <input type="number" id="rate1" value="0.5" step="0.01">
        </div>
        <div class="select-wrapper">
          <label>Years with Rate 1</label>
          <input type="number" id="years1" value="3">
        </div>
      </div>

      <div class="grid-2">
        <div class="select-wrapper">
          <label>Monthly Rate 2 (%)</label>
          <input type="number" id="rate2" value="0.3" step="0.01">
        </div>
        <div></div>
      </div>

      <div class="section-title">Date Range</div>

      <div class="grid-2">
        <div class="select-wrapper">
          <label>Start Year</label>
          <select id="startYear"></select>
        </div>
        <div class="select-wrapper">
          <label>Start Month</label>
          <select id="startMonth"></select>
        </div>
      </div>

      <div class="grid-2">
        <div class="select-wrapper">
          <label>End Year</label>
          <select id="endYear"></select>
        </div>
        <div class="select-wrapper">
          <label>End Month</label>
          <select id="endMonth"></select>
        </div>
      </div>

      <button onclick="calculate()">Calculate</button>

      <div class="result" id="output">
        Select dates to calculate depreciation.
      </div>

    </div>
  </div>

  <!-- CHART -->
  <div class="card">
    <div class="header">
      <h1 style="position:static; transform:none;">Depreciation Chart</h1>
    </div>
    <div class="chart-container">
      <canvas id="chart"></canvas>
    </div>
  </div>

</div>

<script>
let chart;

const startYear = document.getElementById("startYear");
const endYear = document.getElementById("endYear");
const startMonth = document.getElementById("startMonth");
const endMonth = document.getElementById("endMonth");

for (let y = 2000; y <= 2040; y++) {
  startYear.innerHTML += `<option value="${y}">${y}</option>`;
  endYear.innerHTML += `<option value="${y}">${y}</option>`;
}

const months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
months.forEach((m, i) => {
  startMonth.innerHTML += `<option value="${i}">${m}</option>`;
  endMonth.innerHTML += `<option value="${i}">${m}</option>`;
});

function calculate() {
  const sy = parseInt(startYear.value);
  const sm = parseInt(startMonth.value);
  const ey = parseInt(endYear.value);
  const em = parseInt(endMonth.value);

  const totalMonths = (ey - sy) * 12 + (em - sm);
  if (totalMonths < 0) return;

  const rate1 = parseFloat(document.getElementById("rate1").value) / 100;
  const years1 = parseInt(document.getElementById("years1").value);
  const rate2 = parseFloat(document.getElementById("rate2").value) / 100;

  const monthsRate1 = years1 * 12;

  let values = [];
  let current = 1;

  for (let i = 0; i <= totalMonths; i++) {
    if (i <= monthsRate1) {
      current *= (1 - rate1);
    } else {
      current *= (1 - rate2);
    }
    values.push((current * 100).toFixed(2));
  }

  document.getElementById("output").innerHTML =
    `Remaining Value: ${values[values.length-1]}%`;

  if (chart) chart.destroy();

  chart = new Chart(document.getElementById("chart"), {
    type: "line",
    data: {
      labels: values.map((_, i) => i),
      datasets: [{
        label: "Remaining Value (%)",
        data: values,
        borderColor: "#0A3D91",
        backgroundColor: "rgba(10,61,145,0.1)",
        fill: true,
        tension: 0.3
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false } }
    }
  });
}
</script>

</body>
</html>