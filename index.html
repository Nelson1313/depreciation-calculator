<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vehicle Depreciation Calculator</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --blue: #0A3D91;
  --yellow: #FFD200;
  --bg: #f3f6fb;
}

body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: var(--bg);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  display: flex;
  gap: 60px;
  align-items: center;
}

.card {
  background: white;
  border-radius: 24px;
  box-shadow: 0 30px 70px rgba(0,0,0,0.08);
  overflow: hidden;
}

.card-calculator { width: 560px; }
.card-chart { width: 760px; }

.header {
  background: var(--blue);
  padding: 22px 35px;
  display: flex;
  align-items: center;
}

.header img {
  height: 48px;
  margin-right: 20px;
}

.header h1 {
  color: white;
  font-size: 18px;
  font-weight: 600;
  margin: 0 auto;
}

.content {
  padding: 40px;
}

.section-title {
  font-weight: 600;
  color: var(--blue);
  margin-bottom: 15px;
  margin-top: 10px;
}

.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.input-group {
  display: flex;
  flex-direction: column;
}

.input-group label {
  font-size: 12px;
  margin-bottom: 6px;
  color: #555;
}

input, select {
  padding: 14px;
  border-radius: 12px;
  border: 1px solid #dce3f0;
  font-size: 14px;
}

button {
  width: 100%;
  padding: 16px;
  border-radius: 14px;
  border: none;
  background: var(--yellow);
  color: var(--blue);
  font-weight: 700;
  font-size: 15px;
  cursor: pointer;
  margin-top: 25px;
}

.result {
  margin-top: 25px;
  padding: 20px;
  border-radius: 18px;
  background: #eef2f8;
  text-align: center;
  font-weight: 600;
  color: var(--blue);
}

.chart-wrapper {
  padding: 30px;
  height: 500px;
}
</style>
</head>

<body>

<div class="container">

  <!-- CALCULATOR -->
  <div class="card card-calculator">
    <div class="header">
      <img src="logo.jpeg" alt="Logo">
      <h1>Vehicle Depreciation Calculator</h1>
    </div>

    <div class="content">

      <div class="section-title">Rate Settings</div>

      <div class="grid-2">
        <div class="input-group">
          <label>Monthly Rate 1 (%)</label>
          <input type="number" id="rate1" value="0.5" step="0.01">
        </div>

        <div class="input-group">
          <label>Years with Rate 1</label>
          <input type="number" id="years1" value="3">
        </div>
      </div>

      <div class="input-group" style="margin-top:20px;">
        <label>Monthly Rate 2 (%)</label>
        <input type="number" id="rate2" value="0.3" step="0.01">
      </div>

      <div class="section-title" style="margin-top:30px;">Date Range</div>

      <div class="grid-2">
        <div class="input-group">
          <label>Start Year</label>
          <select id="startYear"></select>
        </div>

        <div class="input-group">
          <label>Start Month</label>
          <select id="startMonth"></select>
        </div>

        <div class="input-group">
          <label>End Year</label>
          <select id="endYear"></select>
        </div>

        <div class="input-group">
          <label>End Month</label>
          <select id="endMonth"></select>
        </div>
      </div>

      <button onclick="calculate()">Calculate</button>

      <div class="result" id="output">
        Select dates to calculate depreciation.
      </div>

    </div>
  </div>

  <!-- CHART -->
  <div class="card card-chart">
    <div class="header">
      <h1>Depreciation Chart</h1>
    </div>
    <div class="chart-wrapper">
      <canvas id="chart"></canvas>
    </div>
  </div>

</div>

<script>

// Populate years & months
const startYear = document.getElementById("startYear");
const endYear = document.getElementById("endYear");
const startMonth = document.getElementById("startMonth");
const endMonth = document.getElementById("endMonth");

for (let y = 2000; y <= 2040; y++) {
  startYear.innerHTML += `<option value="${y}">${y}</option>`;
  endYear.innerHTML += `<option value="${y}">${y}</option>`;
}

const months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

months.forEach((m,i)=>{
  startMonth.innerHTML += `<option value="${i}">${m}</option>`;
  endMonth.innerHTML += `<option value="${i}">${m}</option>`;
});

// Chart init (empty)
let chart = new Chart(document.getElementById("chart"), {
  type: "line",
  data: {
    labels: [],
    datasets: [{
      data: [],
      borderColor: "#0A3D91",
      backgroundColor: "rgba(10,61,145,0.15)",
      fill: true,
      tension: 0.3
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: { legend: { display: false } },
    scales: {
      y: { min: 0, max: 100 }
    }
  }
});

function calculate() {

  const sy = parseInt(startYear.value);
  const sm = parseInt(startMonth.value);
  const ey = parseInt(endYear.value);
  const em = parseInt(endMonth.value);

  const startTotal = sy * 12 + sm;
  const endTotal = ey * 12 + em;

  if (endTotal < startTotal) {
    alert("End date cannot be earlier than start date.");
    return;
  }

  const totalMonths = endTotal - startTotal;

  const rate1 = parseFloat(document.getElementById("rate1").value) / 100;
  const years1 = parseInt(document.getElementById("years1").value);
  const rate2 = parseFloat(document.getElementById("rate2").value) / 100;

  const monthsRate1 = years1 * 12;

  let values = [];
  let labels = [];
  let current = 1;

  for (let i = 0; i <= totalMonths; i++) {

    if (i <= monthsRate1)
      current *= (1 - rate1);
    else
      current *= (1 - rate2);

    values.push((current * 100).toFixed(2));
    labels.push(i);
  }

  document.getElementById("output").innerHTML =
    `Remaining Value: ${values[values.length - 1]}%`;

  chart.data.labels = labels;
  chart.data.datasets[0].data = values;
  chart.update();
}

</script>

</body>
</html>